#!/usr/bin/env bash

# Temporal unlink command

temporal:unlink() {
    local service_name="$1"
    local app_name="$2"
    
    if [ -z "$service_name" ] || [ -z "$app_name" ]; then
        echo "Usage: dokku temporal:unlink <service> <app>"
        return 1
    fi

    # Remove environment variables from app
    dokku config:unset $app_name \
        TEMPORAL_SERVICE_NAME \
        TEMPORAL_DB_TYPE

    # Remove from linked apps list
    remove_linked_app "$app_name"

    echo "Unlinked Temporal service '$service_name' from app '$app_name'"
}
